import{_ as s,c as i,o as e,a4 as a}from"./chunks/framework.Bl20_RFa.js";const E=JSON.parse('{"title":"tm_vendor | Terramate Functions","description":"The tm_vendor function dynamically vendor modules during generation.\\n","frontmatter":{"title":"tm_vendor | Terramate Functions","description":"The tm_vendor function dynamically vendor modules during generation.\\n"},"headers":[],"relativePath":"cli/code-generation/functions/tm_vendor.md","filePath":"cli/code-generation/functions/tm_vendor.md"}'),t={name:"cli/code-generation/functions/tm_vendor.md"},n=a(`<h1 id="tm-vendor-function" tabindex="-1"><code>tm_vendor</code> Function <a class="header-anchor" href="#tm-vendor-function" aria-label="Permalink to &quot;\`tm_vendor\` Function&quot;">â€‹</a></h1><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This is an experimental function.</p></div><p><code>tm_vendor</code> takes a <a href="https://developer.hashicorp.com/terraform/language/modules/sources" target="_blank" rel="noreferrer">Terraform module source</a> as a parameter and returns the local path of the given module source after it is vendored. This function can only be used inside <code>generate_hcl</code> and <code>generate_file</code> blocks. In the case of <code>generate_file</code> blocks it can only be used when the context of the block is <code>stack</code>, it won&#39;t work with a <code>root</code> context.</p><p>The function signature is:</p><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tm_vendor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span></span></code></pre></div><p>The function will work directly inside generated content and also inside the <code>lets</code> block. The local path will be relative to the target directory where code is being generated, which is determined by the <code>generate</code> block label.</p><p>For example:</p><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generate_hcl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;file.hcl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tm_vendor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;github.com/mineiros-io/terraform-google-service-account?ref=v0.1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Will generate a local source relative to the stack directory, since the file is generated directly inside a stack. But this:</p><div class="language-hcl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">hcl</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generate_hcl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;dir/file.hcl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tm_vendor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;github.com/mineiros-io/terraform-google-service-account?ref=v0.1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Will generate a local source relative to <code>&lt;stack-dir&gt;/dir</code>, since the file is generated inside a sub-directory of the stack.</p>`,11),l=[n];function o(h,r,p,c,d,k){return e(),i("div",null,l)}const u=s(t,[["render",o]]);export{E as __pageData,u as default};
