import{_ as a,c as e,o as t,a4 as s}from"./chunks/framework.Bl20_RFa.js";const u=JSON.parse(`{"title":"terramate create - Command","description":"With the 'terramate create' command you can create a new stack or import existing Terraform or Terragrunt configurations.","frontmatter":{"title":"terramate create - Command","description":"With the 'terramate create' command you can create a new stack or import existing Terraform or Terragrunt configurations."},"headers":[],"relativePath":"cli/cmdline/create.md","filePath":"cli/cmdline/create.md"}`),i={name:"cli/cmdline/create.md"},o=s(`<h1 id="create-or-import-stacks" tabindex="-1">Create or Import Stacks <a class="header-anchor" href="#create-or-import-stacks" aria-label="Permalink to &quot;Create or Import Stacks&quot;">​</a></h1><p>The <code>terramate create</code> command creates a new stack in a given directory aka stack-path. If the stack-path does not yet exist, it will be created. Code Generation will be triggered by default to initialize the newly created stack.</p><p>Stack metadata can be set upon creation of the stack.</p><p>This metadata will also be synchronized to Terramate Cloud if enabled and can help you and your team to browse through stacks better.</p><p><strong>It can also be used to import existing Terraform or Terragrunt configurations and initialize stacks automatically for an easy on-boarding.</strong></p><h1 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h1><h2 id="create-a-new-stack" tabindex="-1">Create a new stack <a class="header-anchor" href="#create-a-new-stack" aria-label="Permalink to &quot;Create a new stack&quot;">​</a></h2><p>This is the most basic example to create a stack in a directory called <code>path/to/stack</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div><h2 id="import-existing-terraform-root-modules" tabindex="-1">Import existing Terraform Root Modules <a class="header-anchor" href="#import-existing-terraform-root-modules" aria-label="Permalink to &quot;Import existing Terraform Root Modules&quot;">​</a></h2><p>If you already have an existing Terraform setup in your repository and want to initialize all directories containing Terraform configurations as Terramate Stacks, you can use <code>--all-terraform</code> option to automatically detect those stacks and initialize them.</p><p>Terramate detects all Terraform directories that contain a <code>backend {}</code> configuration as a stack for you.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all-terraform</span></span></code></pre></div><h2 id="import-existing-terragrunt-modules" tabindex="-1">Import existing Terragrunt Modules <a class="header-anchor" href="#import-existing-terragrunt-modules" aria-label="Permalink to &quot;Import existing Terragrunt Modules&quot;">​</a></h2><p>Similar to detecting Terraform directories, existing Terragrunt configurations can be easily initialized as Terramate Stacks.</p><p>Terramate detects all Terragrunt Modules that contain a <code>terraform.source</code> configuration as a stack for you.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all-terragrunt</span></span></code></pre></div><p>If the Terragrunt module declare dependencies then the created stack will have its ordering attributes automatically set.</p><p>Terramate also has experimental support for Terragrunt in the change detection, check the <a href="./../change-detection/integrations/terragrunt">Terragrunt integration</a> page for more information.</p><h1 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h1><p><code>terramate create [options] &lt;stack-path&gt;</code></p><p><code>terramate create --all-terraform</code></p><p><code>terramate create --all-terragrunt</code></p><p><code>terramate create --ensure-stack-ids</code></p><p>In the basic use case <code>[options]</code> can be one or multiple of:</p><h2 id="set-the-id" tabindex="-1">Set the ID <a class="header-anchor" href="#set-the-id" aria-label="Permalink to &quot;Set the ID&quot;">​</a></h2><ul><li><p><code>--id &lt;id&gt;</code></p><p>Default: A new UUIDv4.</p><p>Stack IDs need to be unique within the repository. It is recommended to use an UUID as the stack id.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;my-id&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div></li></ul><h2 id="set-the-name" tabindex="-1">Set the name <a class="header-anchor" href="#set-the-name" aria-label="Permalink to &quot;Set the name&quot;">​</a></h2><ul><li><p><code>--name &lt;name&gt;</code></p><p>Default: The basename of the <code>&lt;stack-path&gt;</code>.</p><p>The stack name should help users to understand what a stack is containing.</p><p>It will be used in Terramate Cloud when listing stacks in addition to the <code>&lt;stack-path&gt;</code>.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;My first Terramate stack&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div></li></ul><h2 id="set-the-description" tabindex="-1">Set the description <a class="header-anchor" href="#set-the-description" aria-label="Permalink to &quot;Set the description&quot;">​</a></h2><ul><li><p><code>--description &lt;description&gt;</code></p><p>Default: the <code>&lt;name&gt;</code> of the stack.</p><p>The description should give more details and context about the stack and the resources managed.</p><p>It will be visible in Terramate Cloud when showing stack details and can help your team to understand previews, deployments and drift details.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;This stack contains amazing resources for my service&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div></li></ul><h2 id="set-tags" tabindex="-1">Set tags <a class="header-anchor" href="#set-tags" aria-label="Permalink to &quot;Set tags&quot;">​</a></h2><ul><li><p><code>--tags &lt;tags&gt;</code> A comma separated list of tags to add to the stack.</p><p>This option can be used multiple times to define additional tags.</p><p>Tags can be used to filter stacks when listing them or executing commands in them. They can also be used to define the order of execution with <code>before</code> and <code>after</code> configurations.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tags</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mytag,yourtag,gutentag&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack-a</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tags</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mytag&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;yourtag&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gutentag&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack-b</span></span></code></pre></div></li></ul><h2 id="add-imports" tabindex="-1">Add imports <a class="header-anchor" href="#add-imports" aria-label="Permalink to &quot;Add imports&quot;">​</a></h2><ul><li><p><code>--import &lt;path&gt;</code> A comma separated list of directories or files to add import blocks for in the stacks configuration.</p><p>This option can be used multiple times to define additional import blocks.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;path/to/directory&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;path/to/file&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div></li></ul><h2 id="add-explicit-order-of-execution" tabindex="-1">Add explicit order of execution <a class="header-anchor" href="#add-explicit-order-of-execution" aria-label="Permalink to &quot;Add explicit order of execution&quot;">​</a></h2><ul><li><p><code>--after &lt;list&gt;</code> A comma separated list of filters.</p><p>This option can be used multiple times to define additional <code>after</code> relationships.</p><p>The <code>&lt;list&gt;</code> can contain a mix of</p><ul><li>tags e.g. <code>tag:my-tag</code> <em>(recommended)</em></li><li>relative paths: e.g <code>../path/to/stack</code> to stacks (not recommended)</li></ul><p>When defined, this stack will be executed after matching stacks.</p><p>It is recommended to use tags to maintain refactoring of stack hierarchy. Using stack-paths is available but not recommended to use anymore. When using nested stacks, an implicit order of execution is defined for you.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --after</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;tag:my-tag&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --after</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../another-stack&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div></li><li><p><code>--before &lt;list&gt;</code> A comma separated list of filters.</p><p>This option can be used multiple times to define additional <code>before</code> relationships.</p><p>The <code>&lt;list&gt;</code> can contain a mix of</p><ul><li>tags e.g. <code>tag:my-tag</code> <em>(recommended)</em></li><li>relative paths: e.g <code>../path/to/stack</code> to stacks</li></ul><p>When defined, this stack will be executed before matching stacks.</p><p>It is recommended to use tags to maintain refactoring of stack hierarchy. Using stack-paths is available but not recommended to use anymore. When using nested stacks, an implicit order of execution is defined for you.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --before</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;tag:my-tag&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --before</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;../another-stack&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div></li></ul><h2 id="additional-options" tabindex="-1">Additional options <a class="header-anchor" href="#additional-options" aria-label="Permalink to &quot;Additional options&quot;">​</a></h2><ul><li><p><code>--ignore-existing</code></p><p>If set, and the stack already exists do nothing and don&#39;t fail.</p><p>Example:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ignore-existing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span></span></code></pre></div></li><li><p><code>--no-generate</code></p><p>Disable code generation for the newly created stacks</p></li></ul><h2 id="special-use-cases" tabindex="-1">Special use cases <a class="header-anchor" href="#special-use-cases" aria-label="Permalink to &quot;Special use cases&quot;">​</a></h2><ul><li><p><code>terramate create --all-terraform</code></p><p>Detect and initialize all Terraform directories detected. See example above.</p></li><li><p><code>terramate create --all-terragrunt</code></p><p>Detect and initialize all Terragrunt directories detected. See example above.</p></li><li><p><code>terramate create --ensure-stack-ids</code></p><p>Ensures that every stack has an ID set. Stacks that do not have an <code>id</code> defined, will get a new UUIDv4 generated and set.</p><p>A stack ID for every stack is required in order to synchronize stacks to Terramate Cloud.</p></li></ul>`,41),r=[o];function n(l,p,h,d,c,k){return t(),e("div",null,r)}const m=a(i,[["render",n]]);export{u as __pageData,m as default};
