import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.Bl20_RFa.js";const m=JSON.parse('{"title":"terramate script run - Command","description":"Execute a Terramate Script in all stacks or in a filtered subset of stacks by using the `terramate script run` command.","frontmatter":{"title":"terramate script run - Command","description":"Execute a Terramate Script in all stacks or in a filtered subset of stacks by using the `terramate script run` command."},"headers":[],"relativePath":"cli/cmdline/script/script-run.md","filePath":"cli/cmdline/script/script-run.md"}'),t={name:"cli/cmdline/script/script-run.md"},n=e(`<h1 id="script-run" tabindex="-1">Script Run <a class="header-anchor" href="#script-run" aria-label="Permalink to &quot;Script Run&quot;">​</a></h1><p><strong>Note:</strong> This is an upcoming experimental feature that is subject to change in the future. To use it now, you must enable the project config option <code>terramate.config.experiments = [&quot;scripts&quot;]</code></p><p>The <code>terramate script run</code> command will run a Terramate script over a set of stacks. <code>CMD</code> needs to exactly match the label defined in the <code>script</code> block. For example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>script &quot;mycommand&quot; {</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>The above script could therefore be run with <code>script run mycommand</code>.</p><p>The script will run on all stacks under the current working directory where:</p><ul><li>the script is available (scripts follow the same inheritance rules as globals)</li><li>any filters match. <code>script run</code> currently supports <code>--changed</code> and <code>--tags</code> filters.</li></ul><p>It&#39;s also possible to define commands that consist of multiple keywords to create a multi-level command structure, i.e. <code>command subcommand ...</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>script &quot;command&quot; &quot;subcommand&quot; {</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>The above can be run with <code>script run command subcommand</code>.</p><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p><code>terramate script run [options] CMD...</code></p><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><p>Run a script called &quot;deploy&quot; on all stacks where it is available:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div><p>Run a script called &quot;deploy&quot; on all changed stacks where it is available:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --changed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div><p>Do a dry run of running the deploy script:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dry-run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div><p>Run a script called &quot;deploy&quot; in a specific stack without recursing into subdirectories:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/stack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-recursive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div><p>Run a script in all stacks with an specific Terramate Cloud status:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">terramate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cloud-status=unhealthy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span></span></code></pre></div>`,23),p=[n];function l(r,c,o,h,d,u){return i(),a("div",null,p)}const g=s(t,[["render",l]]);export{m as __pageData,g as default};
